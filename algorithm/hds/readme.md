[source](https://juejin.im/post/5b3608336fb9a00e765e8ed4)
[source](http://bubkoo.com/2014/01/14/sort-algorithm/heap-sort/)

- ç®€å•çš„äºŒå‰æ ‘
- ç®€å•çš„æ»¡äºŒå‰æ ‘
- ç®€å•çš„å®Œå…¨äºŒå‰æ ‘
- ç®€å•çš„å †
- ç®€å•çš„å †åˆ†ç±»

å †
  <-äºŒå‰æ ‘
  æ¯ä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šä¸¤ä¸ªåˆ†æ”¯çš„æ ‘ç»“æ„ï¼Œ å·¦å­æ ‘å’Œå³å­æ ‘
  ![äºŒå‰æ ‘](https://user-gold-cdn.xitu.io/2018/6/29/1644b1037a8c7413?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

  å·¦å³æ¬¡åº.

  ç¬¬iå±‚æœ€å¤šæ‹¥æœ‰ 2^(i-1)ä¸ªèŠ‚ç‚¹
  æ·±åº¦ä¸ºKçš„äºŒå‰æ ‘æœ€å¤šå…±æœ‰2^(k+1)-1ä¸ªèŠ‚ç‚¹
  æ ¹èŠ‚ç‚¹æ‰€æœ‰çš„å±‚çº§i=0 æ‰€åœ¨æ·±åº¦k=0

### ç®€å•çš„æ»¡äºŒå‰æ ‘

æ·±åº¦ä¸ºk, ç¬¬i å±‚æ‹¥æœ‰ 2^(i-1)ä¸ªèŠ‚ç‚¹, å…±æ‹¥æœ‰2^(k+1)-1                         

äºŒå‰æ ‘çš„æ¯ä¸€å±‚éƒ½æ˜¯æ»¡çš„ï¼Œ é™¤äº†æœ€åä¸€å±‚ä¸Šçš„èŠ‚ç‚¹ï¼Œæ¯ä¸€å±‚éƒ½å…·æœ‰å·¦èŠ‚ç‚¹å’Œå³èŠ‚ç‚¹ã€‚

### ç®€å•çš„å®Œå…¨äºŒå‰æ ‘
æ·±åº¦ä¸ºk, å…±æœ‰nä¸ªèŠ‚ç‚¹ï¼Œå½“ä¸”ä»…å½“å…¶ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ éƒ½å¯ä»¥å’ŒåŒæ ·æ·±åº¦ä¸ºKçš„æ»¡äºŒå‰æ ‘æ—¶ï¼Œ æŒ‰å±‚åºå·ç¼–ç›¸åŒçš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯åºå·ä¸º1åˆ°nçš„èŠ‚ç‚¹ï¼Œ å‡ä¸€ä¸€å¯¹åº”æ—¶ã€‚

### ç®€å•çš„å †
å †(Heap) ä¸€ç±»ç‰¹æ®Šçš„æ•°æ®ç»“æ„çš„ç»Ÿç§°ï¼Œ é€šå¸¸æ˜¯ä¸€ä¸ªå¯ä»¥è¢«çœ‹ä½œä¸€æ£µæ ‘çš„æ•°ç»„å¯¹è±¡

å †çš„å®ç°æ˜¯é€šè¿‡æ„é€ äºŒå‰å †ï¼Œå®ä¸ºäºŒå‰æ ‘çš„ä¸€ç§ã€‚
å †æ˜¯å®Œå…¨äºŒå‰æ ‘
![heap](https://user-gold-cdn.xitu.io/2018/6/29/1644b1037d4c722a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

æŸä¸ªèŠ‚ç‚¹çš„ä¸‹æ ‡idx, è¿™ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸å­©å­èŠ‚ç‚¹çš„ä¸‹æ ‡

```js
var getParentPos = function(idx) {
  return Math.floor(idx/2);
}

var getLeftChildPos = function(idx) {
  return 2*idx
}

var getRightChildPos = function(idx) {
  return 2*idx + 1;
}
```

å°†å †è½¬å˜ä¸ºæ•°ç»„æ—¶ï¼Œ æ•°ç»„çš„åˆå§‹åŒ–ä¸‹æ ‡å§‹ç»ˆä¸º0ï¼Œ æ‰€ä»¥æˆ‘ä»¬çš„å †æ•°æ®ç»“æ„æ¨¡å‹åœ¨æ­¤æ—¶è¦å‘ç”Ÿå¦‚ä¸‹æ”¹å˜ã€‚

### ç®€å•çš„å †åˆ†ç±»
å¤§é¡¶å †  å°é¡¶å †
æ¯ä¸ªèŠ‚ç‚¹éƒ½å¤§äºæˆ–ç­‰äºå…¶å·¦å³å­©å­èŠ‚ç‚¹çš„å€¼ï¼Œ
å‡è®¾æœ‰ä¸€ä¸ªå †ï¼Œå°äºæˆ–ç­‰äºå…¶å·¦å³å­©å­èŠ‚ç‚¹çš„å€¼ï¼Œ å°é¡¶å †

ç®—æ³•ä»‹ç»
è½»æ¾å®ç°å¤§é¡¶å †è°ƒæ•´
è½»æ¾åˆ›å»ºå¤§é¡¶å †
è½»æ¾å®ç°å †æ’åº
å¤æ‚åº¦åˆ†æ

å †æ’åºï¼Œåˆ©ç”¨å †ï¼ˆå¤§é¡¶å †ï¼‰è¿›è¡Œæ’åºçš„æ–¹æ³•
æ€æƒ³ï¼šå°†å¾…æ’åºçš„æ•°ç»„æ„æˆä¸€ä¸ªå¤§é¡¶å †ã€‚ æœ€å¤§å€¼å°±æ˜¯å †é¡¶çš„æ ¹èŠ‚ç‚¹ã€‚å°†å®ƒç§»èµ°ï¼Œ ä¸å †ç»„çš„æœªå±‚å…ƒç´ äº¤æ¢ï¼Œ æœªå±‚å…ƒç´ å°±æ˜¯æœ€å¤§å€¼ï¼Œ å°†ä¹˜ä½™çš„n-1ä¸ªå…ƒç´ åˆé‡æ–°æ„é€ æˆå †ï¼Œæ¬¡å¤§å€¼ï¼Œ å¦‚æ­¤åå¤ï¼Œ å°±æ˜¯ä¸€ä¸ªæœ‰åºæ•°ç»„äº†ã€‚ 

- å¤§é¡¶å †è°ƒæ•´ï¼ˆMax-Heapifyï¼‰å°†å †çš„æœªç«¯å­èŠ‚ç‚¹åšè°ƒæ•´ï¼Œä½¿å¾—å­èŠ‚ç‚¹æ°¸è¿œå°äºçˆ¶èŠ‚ç‚¹
- åˆ›å»ºå¤§é¡¶å †ï¼ˆBuild-Max-Heapï¼‰ å°†å †ä¸­æ‰€æœ‰æ•°æ®è°ƒæ•´ä½ç½®ï¼Œ ä½¿å…¶æˆä¸ºå¤§é¡¶å †
- å †æ’åºï¼ˆHeap-Sorï¼‰ç§»é™¤åœ¨å †é¡¶çš„æ ¹èŠ‚ç‚¹ï¼Œ å¹¶åšå¤§é¡¶å †è°ƒæ•´çš„è¿­ä»£è¿ç®—ã€‚
